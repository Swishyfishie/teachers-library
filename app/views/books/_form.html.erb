<%= form_with model: @book, local: true do |f| %>

<div class="field<%= ' field_with_errors' if @book.errors[:title].any? %>">
  <%= f.label :title %>
  <%= f.text_field :title %>
</div> <br>

<div class="field<%= ' field_with_errors' if @book.errors[:author].any? %>">
  <%= f.label :author %>
  <%= f.text_field :author %>
  </div> <br>

  <%= f.label "Subject(s): " %>
  <%= f.collection_check_boxes :subject_ids, Subject.all, :id, :name %> <br>

  <%= f.fields_for :subjects do |subject_fields| %>
    <%= subject_fields.text_field :name %>
  <% end %> <br>

  <%= f.submit %>
<% end %>

